<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%><%@ page import="com.auphi.ktrl.i18n.Messages" %><%@ page import="com.auphi.ktrl.system.user.util.*" %><%	String errMsg = request.getAttribute("errMsg")==null?"":request.getAttribute("errMsg").toString();%><!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html><head><link rel="shortcut icon" href="images/platform.ico" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><link rel="stylesheet" type="text/css" href="common/ext4/resources/css/ext-all-gray.css"><link rel="stylesheet" type="text/css" href="common/css/mystyle.css"><link href="common/css/style.css" rel="stylesheet" type="text/css" /><script type="text/javascript" src="common/ext4/bootstrap.js"></script><script type="text/javascript" src="common/ext4/locale/ext-lang-zh_CN.js"></script><script type="text/javascript" src="common/jquery-1.7.1.js"></script><script src="common/cloud.js" type="text/javascript"></script><script language="javascript">	$(function(){    $('.loginbox').css({'position':'absolute','left':($(window).width()-692)/2});	$(window).resize(function(){      $('.loginbox').css({'position':'absolute','left':($(window).width()-692)/2});    })  });  </script> <script type="text/javascript">Ext.onReady(function(){	var errMsg = '<%=errMsg %>';	if(errMsg != ''){		Ext.MessageBox.alert('<%=Messages.getString("Metadata.Message.Title.Error") %>',errMsg);	}	Ext.QuickTips.init(); 	Ext.form.Field.prototype.msgTarget='side';});function toLogin(){	var username = document.getElementById("user_name").value;	var password = document.getElementById("password").value;	if(username == ''){		Ext.MessageBox.alert('<%=Messages.getString("Metadata.Message.Title.Error") %>','<%=Messages.getString("Login.Jsp.Warn.Empty.Username") %>');		return false;	}else {		if(password == ''){			Ext.MessageBox.alert('<%=Messages.getString("Metadata.Message.Title.Error") %>','<%=Messages.getString("Login.Jsp.Warn.Empty.Password") %>');			return false;		}else {			Ext.Ajax.request({				url: 'login',				method: 'POST',				params: {			        action: 'checkLogin',			        user_name: username,			        password: password			    },				success: function(transport) {					var res = transport.responseText;					if(res == '<%=UMStatus.SUCCESS.getStatusMessage() %>'){						document.forms[0].submit();					}else {						Ext.MessageBox.alert('<%=Messages.getString("Metadata.Message.Title.Error") %>',res);						return false;					}				}			});		}	}}function toReset(){	document.forms[0].reset();}/* * register 窗口 ========================================= *  * */            var windowRegister;function initWindow(){    windowRegister = new Ext.Window({        layout: 'fit',        width: 380,        height: 280,        resizable: false,        closeAction: 'hide',		title: '注册',        items: [registerForm]    });}                        /* * 设置 registerForm=================================== *  **/var registerForm;function initForm(){    registerForm = new Ext.form.FormPanel({        id: 'registerForm',        width: 230,        frame: true,                items: [new Ext.form.TextField({            fieldLabel: '组织机构名称',            name: 'organizer_name',            allowBlank: false,            blankText   : "不可为空"         }), new Ext.form.TextField({	        fieldLabel: '联系人',	        name: 'organizer_contact',	        value: '',	        allowBlank: false,	        blankText   : "不可为空" 	    }), new Ext.form.TextField({		    fieldLabel: '邮箱',	        name: 'organizer_email',	        value: '',	        allowBlank: false,	        vtype: 'email'		}), new Ext.form.TextField({            fieldLabel: '密码',            name: 'organizer_passwd',            value: '',            allowBlank: false,			inputType: 'password',            vtype: 'alphanum'		}), new Ext.form.TextField({            fieldLabel: '固定电话',            name: 'organizer_telphone',            value: '',            allowBlank: true		}), new Ext.form.TextField({            fieldLabel: '手机',            name: 'organizer_mobile',            value: '',            allowBlank: false,            blankText   : "不可为空" 		}), new Ext.form.TextField({            fieldLabel: '地址',            name: 'organizer_address',            value: '',            allowBlank: true		})],        buttons: [new Ext.Button({            text: '注册',            handler: register        }), new Ext.Button({            text: '重置',            formBind: true,            handler: function(){                registerForm.getForm().reset();            }        })]    });}/* * 表单提交动作================================= *  **/function register(){//提交注册表单    registerForm.form.submit({        clientValidation: true,        waitMsg: '正在注册请稍后',        waitTitle: '提示',        url: 'register',        method: 'POST',//请求方式		params: {   			action: 'register'		},        success: function(form, action){            Ext.Msg.alert('提示', '注册成功！激活邮件已发送至邮箱，请登录邮箱完成激活！');			windowRegister.close();        }    });}initForm();initWindow();function toRegister(){	//windowRegister.show();	window.location.href="register.jsp";}</script><title><%=Messages.getString("Default.Jsp.Title") %></title><style type="text/css"><!--body {	margin-left: 0px;	margin-top: 0px;	margin-right: 0px;	margin-bottom: 0px;	background-image: url(images/bg1.jpg);	font-size: 9px;}.style2 {	COLOR: #ffffff;	font-size: 12px;}--></style><script language="JavaScript" type="text/JavaScript">function MM_swapImgRestore() { //v3.0  var i,x,a=document.MM_sr; for(i=0;a&&i<a.length&&(x=a[i])&&x.oSrc;i++) x.src=x.oSrc;}function MM_preloadImages() { //v3.0  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}}function MM_findObj(n, d) { //v4.01  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);  if(!x && d.getElementById) x=d.getElementById(n); return x;}function MM_swapImage() { //v3.0  var i,j=0,x,a=MM_swapImage.arguments; document.MM_sr=new Array; for(i=0;i<(a.length-2);i+=3)   if ((x=MM_findObj(a[i]))!=null){document.MM_sr[j++]=x; if(!x.oSrc) x.oSrc=x.src; x.src=a[i+2];}}function KeyDown(e){	if(e != null){		if (e.keyCode == 13) {			toLogin();		}	}}</script></head><body style="background-color:#1c77ac; background-image:url(images/login/light.png); background-repeat:no-repeat; background-position:center top; overflow:hidden;">    <div id="mainBody">      <div id="cloud1" class="cloud"></div>      <div id="cloud2" class="cloud"></div>    </div>  <div class="logintop">        <span>欢迎登录傲飞数据整合平台</span>        <ul>    <!-- <li><a href="#">回首页</a></li>    <li><a href="#">帮助</a></li>    <li><a href="#">关于</a></li> -->    </ul>        </div>        <div class="loginbody">        <span class="systemlogo"></span>            <div class="loginbox">    <form id="listForm" name="listForm" action="login" method="post">    <input type="hidden" name="action" id="action" value="platformLogin">	<input type="submit" name="subbtn" id="subbtn" style="display:none;"/>    <ul>    <li><input id="user_name"  name="user_name" type="text" class="loginuser" autocomplete="off" /></li>    <li><input id="password" name="password" type="password" class="loginpwd" value="" autocomplete="off" /></li>    <li><input name="" type="button" class="loginbtn" value="登录"  onclick="toLogin();"  />        <!-- <input name="" type="button" class="loginbtn" value="注册" onclick="toRegister();"> -->    <!-- <label><input name="" type="checkbox" value="" checked="checked" />记住密码</label><label><a href="#">忘记密码？</a></label> -->    </li>    </ul>    </form>        </div>        </div>                <div class="loginbm"><a target="view_window" href="http://www.doetl.com"><%=Messages.getString("Default.Jsp.CopyRight") %></a> </div>	    </body></html></html>